<!-- HEAD section unchanged -->
<style>
  /* ...existing styles... */
  .spectrum-strip.animated {
    background: linear-gradient(270deg, red, orange, yellow, green, cyan, blue, violet);
    background-size: 1400% 1400%;
    animation: moveSpectrum 5s linear infinite;
  }
  @keyframes moveSpectrum {
    0% { background-position: 0% 50%; }
    100% { background-position: 100% 50%; }
  }
  .story-bar {
    display: flex;
    gap: 1rem;
    overflow-x: auto;
    padding: 1rem;
    margin: 1rem;
    background: var(--glass);
    backdrop-filter: blur(10px);
    border-radius: 1rem;
  }
  .story {
    width: 60px;
    height: 60px;
    border-radius: 50%;
    border: 2px solid #fff;
    flex-shrink: 0;
    background-size: cover;
    background-position: center;
    position: relative;
  }
  .story::after {
    content: "";
    position: absolute;
    bottom: -5px;
    left: 50%;
    transform: translateX(-50%);
    width: 6px;
    height: 6px;
    border-radius: 50%;
    background: lime;
  }
  .post-footer {
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-size: 0.85rem;
    margin-top: 0.75rem;
    color: #ccc;
  }
  .post-footer button {
    background: none;
    border: none;
    color: white;
    cursor: pointer;
    font-size: 0.85rem;
    margin-right: 0.5rem;
  }
</style>
</head>
<body>
  <div class="container">
    <div class="spectrum-strip" id="spectrumStrip"></div>
    <div class="header">Maerd Feed</div>

    <!-- Stories Section -->
    <div class="story-bar" id="storyBar">
      <div class="story" style="background-image:url('assets/avatars/bakery.png')" title="John's Story"></div>
      <div class="story" style="background-image:url('assets/avatars/mobitech.png')" title="MobiTech Story"></div>
      <!-- More stories -->
    </div>

    <!-- Posting Section -->
    <div class="post-box">
      <textarea id="newPost" placeholder="Share your thoughts with other pioneers"></textarea>
      <button onclick="submitPost()">Post</button>
    </div>

    <!-- Feed Posts -->
    <div class="feed" id="feed">
      <!-- JS-rendered posts -->
    </div>

    <!-- Navigation & Background Bubbles -->
    <div class="bottom-nav">
      <!-- ...navigation icons... -->
    </div>
    <div class="bubble bubble1"></div>
    <div class="bubble bubble2"></div>
  </div>

  <script>
    const feedEl = document.getElementById('feed');
    const spectrumStrip = document.getElementById('spectrumStrip');

    function toggleSpectrumLoading(state) {
      spectrumStrip.classList.toggle('animated', state);
    }

    function addPost({ id, author, content, avatar, timestamp, likes = 0, views = 0 }) {
      const post = document.createElement('div');
      post.className = 'post';
      post.innerHTML = `
        <div class="post-header">
          <img class="avatar" src="${avatar}" alt="${author}" />
          <div class="author-info">
            <h3>${author}</h3>
            <span class="timestamp">${timestamp}</span>
          </div>
        </div>
        <p>${content}</p>
        <div class="post-footer">
          <div>
            <button onclick="likePost('${id}')">‚ù§Ô∏è <span id="likes-${id}">${likes}</span></button>
            <button onclick="commentOnPost('${id}')">üí¨ Comment</button>
          </div>
          <div>
            üëÅÔ∏è <span id="views-${id}">${views}</span> views
          </div>
        </div>
      `;
      post.setAttribute('data-post-id', id);
      feedEl.insertBefore(post, feedEl.firstChild);
      incrementView(id);
    }

    function submitPost() {
      const textarea = document.getElementById('newPost');
      const content = textarea.value.trim();
      if (!content) return;

      toggleSpectrumLoading(true);

      const id = 'post_' + Date.now(); // Simplified ID generation
      const newPost = {
        id,
        author: 'You',
        avatar: 'assets/avatars/default.png',
        timestamp: 'just now',
        content,
        likes: 0,
        views: 0
      };

      // Simulate upload delay
      setTimeout(() => {
        addPost(newPost);
        textarea.value = '';
        toggleSpectrumLoading(false);
        // TODO: Push to Firebase
      }, 1000);
    }

    function likePost(postId) {
      const likeSpan = document.getElementById(`likes-${postId}`);
      let current = parseInt(likeSpan.textContent);
      likeSpan.textContent = current + 1;
      // TODO: Update Firebase like count
    }

    function incrementView(postId) {
      const viewSpan = document.getElementById(`views-${postId}`);
      let current = parseInt(viewSpan.textContent);
      viewSpan.textContent = current + 1;
      // TODO: Update Firebase view count
    }

    function commentOnPost(postId) {
      window.location.href = `post.html?postId=${postId}`;
    }

    // Example static posts
    addPost({
      id: 'p1',
      author: "John's Bakery",
      content: "Welcome to our new store! We bake fresh bread every day. üçû",
      avatar: 'assets/avatars/bakery.png',
      timestamp: 'just now',
      likes: 4,
      views: 19
    });

    addPost({
      id: 'p2',
      author: 'MobiTech Solutions',
      content: 'Launching our new app next week. Stay tuned!',
      avatar: 'assets/avatars/mobitech.png',
      timestamp: '20 minutes ago',
      likes: 12,
      views: 45
    });
  </script>
</body>
</html>
